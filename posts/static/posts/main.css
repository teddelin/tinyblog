/* Base layout */
:root {
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --bg: #ffffff;
  --fg: #111827;
  --muted: #6b7280;
  --border: #e5e7eb;
  --card-bg: #ffffff;
  --accent: #0b5fff;
  --soft-shadow: 0 1px 1px rgba(0,0,0,.04);
}
[data-theme="dark"] {
  --bg: #0f172a;
  --fg: #e5e7eb;
  --muted: #9ca3af;
  --border: #334155;
  --card-bg: #111827;
  --accent: #60a5fa;
  --soft-shadow: 0 1px 1px rgba(255,255,255,.04);
}
* { box-sizing: border-box; }
body { font-family: var(--font-mono); margin: 0; background: var(--bg); color: var(--fg); }
input, textarea, select, button { font-family: var(--font-mono); }
.container { max-width: 960px; margin: 0 auto; padding: 1rem; }
main { padding: 1.5rem 0 2rem; }
.wide .container { max-width: 1100px; }
a { color: inherit; text-decoration: none; } 

/* Navbar */
nav { background: transparent; color: inherit; border-bottom: 1px solid var(--border); }
nav .container { display: flex; gap: 1rem; align-items: center; }
.divider { opacity: .5; }
.flex-fill { flex: 1; }
.muted { color: var(--muted); }
.logout-form { display: inline; margin: 0; }
.logout-button { background: none; border: none; color: var(--accent); cursor: pointer; padding: .6rem .4rem; }

/* Forms */
.form-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 10px; box-shadow: var(--soft-shadow); padding: 1rem; }
.form-grid { display: grid; grid-template-columns: 1fr; gap: .75rem; }
.row label { display: block; font-weight: 600; margin-bottom: .25rem; }
.row { margin: .75rem 0; }
.tb-input, .tb-textarea, .tb-select { width: 100%; padding: .6rem .7rem; border: 1px solid var(--border); background: var(--card-bg); color: var(--fg); border-radius: 8px; font-size: 1rem; }
.tb-input:focus, .tb-textarea:focus, .tb-select:focus { outline: none; border-color: #93c5fd; box-shadow: 0 0 0 3px rgba(147,197,253,.35); }
.tb-textarea { line-height: 1.5; }
.tb-monospace { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.actions { display: flex; align-items: center; gap: 1rem; margin-top: .5rem; }
.btn-primary { background: var(--accent); color: #fff; border: none; padding: .6rem 1rem; border-radius: 8px; cursor: pointer; }
.errors, .field-errors { color: #b00020; }
.row--spaced { margin-top: 1rem; }

/* Editor + preview */
.editor-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; align-items: start; }
@media (min-width: 900px) { .editor-grid { grid-template-columns: 1fr 1fr; } }
.md-preview { border: 1px solid var(--border); border-radius: 8px; padding: .75rem; min-height: 12rem; background: var(--card-bg); }
.preview-header { font-weight: 600; color: var(--muted); margin-bottom: .25rem; }

/* EasyMDE / CodeMirror dark-mode friendly styling */
.EasyMDEContainer { background: var(--card-bg); color: var(--fg); border-radius: 8px; }
.EasyMDEContainer .CodeMirror { background: var(--card-bg); color: var(--fg); border: 1px solid var(--border); border-radius: 8px; }
.EasyMDEContainer .CodeMirror-scroll { background: var(--card-bg); }
.EasyMDEContainer .CodeMirror pre { color: var(--fg); }
.EasyMDEContainer .CodeMirror-cursor { border-left: 1px solid var(--fg); }
.EasyMDEContainer .CodeMirror-placeholder { color: var(--muted); }
.EasyMDEContainer .editor-toolbar { background: var(--card-bg); border: 1px solid var(--border); border-bottom: none; border-radius: 8px 8px 0 0; }
.EasyMDEContainer .editor-toolbar a { color: var(--fg); }
[data-theme="dark"] .EasyMDEContainer .editor-toolbar a,
[data-theme="dark"] .EasyMDEContainer .editor-toolbar button,
[data-theme="dark"] .EasyMDEContainer .editor-toolbar i,
[data-theme="dark"] .EasyMDEContainer .editor-toolbar .fa {
  color: #ffffff !important;
}
.EasyMDEContainer .editor-toolbar a:hover { background: rgba(0,0,0,0.05); }
[data-theme="dark"] .EasyMDEContainer .editor-toolbar a:hover,
[data-theme="dark"] .EasyMDEContainer .editor-toolbar a.active,
[data-theme="dark"] .EasyMDEContainer .editor-toolbar button:hover {
  /* Use an accent-tinted hover, not white */
  background: rgba(96, 165, 250, 0.18);
}
.EasyMDEContainer .editor-toolbar i.separator { border-left: 1px solid var(--border); border-right: 1px solid var(--border); }
.EasyMDEContainer .editor-statusbar { background: var(--card-bg); color: var(--muted); border: 1px solid var(--border); border-top: none; border-radius: 0 0 8px 8px; }

/* Post list cards */
.card-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
@media (min-width: 720px) { .card-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1100px) { .card-grid { grid-template-columns: repeat(3, 1fr); } }
.post-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 10px; padding: 1rem; box-shadow: var(--soft-shadow); }
.post-card h2 { margin: 0 0 .25rem; font-size: 1.2rem; }
.post-card .meta { color: var(--muted); font-size: .85rem; margin-bottom: .5rem; }
/* No custom anchor styling; use browser defaults */

/* Search bar */
.search-bar { display:flex; align-items:center; gap:.5rem; margin-bottom:1rem; justify-content:flex-end; }
.search-label { font-weight:600; font-size:.9rem; color: var(--muted); }
.search-input { max-width:260px; font-size:.9rem; padding:.35rem .5rem; }
.search-clear { padding:.35rem .6rem; font-size:.9rem; background: var(--card-bg); color: var(--fg); border:1px solid var(--border); border-radius:8px; }

/* Pager */
.pager { display:flex; justify-content: space-between; margin-top: 2rem; }

/* Post detail */
.post-title { margin: 0 0 .25rem; font-size: 1.9rem; }
.post-meta { color: var(--muted); font-size: .95rem; margin-bottom: 1rem; }
.post-content { line-height: 1.6; }
.back-link { display: inline-block; margin-top: 2rem; }

/* Markdown code blocks */
:root { --code-bg: #f6f8fa; }
[data-theme="dark"] { --code-bg: #1f2937; }
.post-content :not(pre) > code,
.md-preview :not(pre) > code {
  background: var(--code-inline-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 0 .25rem;
}
.post-content pre,
.md-preview pre {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: .75rem;
  overflow: auto;
}
.post-content pre code,
.md-preview pre code { background: transparent; }
/* Inline code background vars */
:root { --code-inline-bg: #f1f5f9; }
[data-theme="dark"] { --code-inline-bg: #374151; }
